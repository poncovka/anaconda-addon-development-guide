<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">6.2. Graphical user interface</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.2" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="Fedora-Anaconda_Addon_Development_Guide-24-en-US-2-1" /><link rel="home" href="index.html" title="Anaconda Addon Development Guide" /><link rel="up" href="sect-writing-anaconda-addon.html" title="6. Writing an Anaconda add-on" /><link rel="prev" href="sect-writing-anaconda-addon.html" title="6. Writing an Anaconda add-on" /><link rel="next" href="sect-anaconda-addon-gui-support-advanced.html" title="6.2.2. Advanced features" /></head><body class="draft "><p id="title"><a class="left" href="http://www.fedoraproject.org"><img alt="Product Site" src="Common_Content/images//image_left.png" /></a><a class="right" href="http://docs.fedoraproject.org"><img alt="Documentation Site" src="Common_Content/images//image_right.png" /></a></p><ul class="docnav top"><li class="previous"><a accesskey="p" href="sect-writing-anaconda-addon.html"><strong>Prev</strong></a></li><li class="home">Anaconda Addon Development Guide</li><li class="next"><a accesskey="n" href="sect-anaconda-addon-gui-support-advanced.html"><strong>Next</strong></a></li></ul><div class="section"><div class="titlepage"><div><div keep-together.within-column="always"><h3 class="title"><a id="sect-anaconda-addon-gui-support">
      ⁠</a>6.2. Graphical user interface</h3></div></div></div><div class="para">
				This section will describe adding support for the graphical user interface (GUI) to your add-on. Before you begin, make sure that your add-on already includes support for Kickstart as described in the previous section.
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					Before you start developing add-ons with support for the graphical interface, make sure to install the <span class="package">anaconda-widgets</span> and <span class="package">anaconda-widgets-devel</span> packages, which contain Gtk widgets specific for <span class="application"><strong>Anaconda</strong></span> such as <code class="systemitem">SpokeWindow</code>.
				</div></div></div><div class="section"><div class="titlepage"><div><div keep-together.within-column="always"><h4 class="title"><a id="sect-anaconda-addon-gui-support-basic">
      ⁠</a>6.2.1. Basic features</h4></div></div></div><div class="para">
					Similarly to Kickstart support in add-ons, GUI support requires every part of the add-on to contain at least one module with a definition of a class inherited from a particular class defined by the API. In case of graphical support, the only recommended class is <code class="classname">NormalSpoke</code>, which is defined in <a href="https://github.com/rhinstaller/anaconda/blob/master/pyanaconda/ui/gui/spokes/__init__.py"><code class="filename">pyanaconda.ui.gui.spokes</code></a>. As the class name suggests, it is a class for the <span class="emphasis"><em>normal spoke</em></span> type of screen as described in <a class="xref" href="sect-anaconda-hub-and-spoke.html">Section 3, “The Hub &amp; Spoke model”</a>.
				</div><div class="para">
					To implement a new class inherited from <code class="classname">NormalSpoke</code>, you must define the following class attributes which are required by the API:
				</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							<code class="varname">builderObjects</code> - lists all top-level objects from the spoke's <code class="filename">.glade</code> file that should be, with their children objects (recursively), exposed to the spoke - or should be an empty list if everything should be exposed to the spoke (not recommended)
						</div></li><li class="listitem"><div class="para">
							<code class="varname">mainWidgetName</code> - contains the id of the main window widget <a id="idm140412258820304">
      ⁠</a><a href="#ftn.idm140412258820304" class="footnote"><sup class="footnote">[4]</sup></a> as defined in the <code class="filename">.glade</code> file
						</div></li><li class="listitem"><div class="para">
							<code class="varname">uiFile</code> - contains the name of the <code class="filename">.glade</code> file
						</div></li><li class="listitem"><div class="para">
							<code class="varname">category</code> - contains the class of the category the spoke belongs to
						</div></li><li class="listitem"><div class="para">
							<code class="varname">icon</code> - contains the identifier of the icon that will be used for the spoke on the hub
						</div></li><li class="listitem"><div class="para">
							<code class="varname">title</code> defines the title that will be used for the spoke on the hub
						</div></li></ul></div><div class="para">
					Example module with all required definitions is shown in the following example:
				</div><div class="example"><a id="exam-gui-required-attributes">
      ⁠</a><p class="title"><strong>Example 7. Defining Attributes Required for the Normalspoke Class</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment"># will never be translated</span>
<span xmlns="" class="line">​</span>_ <span xmlns="" class="perl_Char">=</span> <span xmlns="" class="perl_Keyword">lambda</span> x<span xmlns="" class="perl_Char">:</span> x
<span xmlns="" class="line">​</span>N_ <span xmlns="" class="perl_Char">=</span> <span xmlns="" class="perl_Keyword">lambda</span> x<span xmlns="" class="perl_Char">:</span> x
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment"># the path to addons is in sys.path so we can import things from org_fedora_hello_world</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Char">from</span> org_fedora_hello_world.categories.hello_world <span xmlns="" class="perl_Char">import</span> HelloWorldCategory
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Char">from</span> pyanaconda.ui.gui.spokes <span xmlns="" class="perl_Char">import</span> NormalSpoke
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment"># export only the spoke, no helper functions, classes or constants</span>
<span xmlns="" class="line">​</span>__all__ <span xmlns="" class="perl_Char">=</span> <span xmlns="" class="perl_Char">[</span><span xmlns="" class="perl_String">"HelloWorldSpoke"</span><span xmlns="" class="perl_Char">]</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">class</span> HelloWorldSpoke<span xmlns="" class="perl_Char">(NormalSpoke):</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">"""</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    Class for the Hello world spoke. This spoke will be in the Hello world</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    category and thus on the Summary hub. It is a very simple example of</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    a unit for the Anaconda's graphical user interface.</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    :see: pyanaconda.ui.common.UIObject</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    :see: pyanaconda.ui.common.Spoke</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    :see: pyanaconda.ui.gui.GUIObject</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    """</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">### class attributes defined by API ###</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment"># list all top-level objects from the .glade file that should be exposed</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment"># to the spoke or leave empty to extract everything</span>
<span xmlns="" class="line">​</span>    builderObjects <span xmlns="" class="perl_Char">=</span> <span xmlns="" class="perl_Char">[</span><span xmlns="" class="perl_String">"helloWorldSpokeWindow"</span>, <span xmlns="" class="perl_String">"buttonImage"</span><span xmlns="" class="perl_Char">]</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment"># the name of the main window widget</span>
<span xmlns="" class="line">​</span>    mainWidgetName <span xmlns="" class="perl_Char">=</span> <span xmlns="" class="perl_String">"helloWorldSpokeWindow"</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment"># name of the .glade file in the same directory as this source</span>
<span xmlns="" class="line">​</span>    uiFile <span xmlns="" class="perl_Char">=</span> <span xmlns="" class="perl_String">"hello_world.glade"</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment"># category this spoke belongs to</span>
<span xmlns="" class="line">​</span>    category <span xmlns="" class="perl_Char">=</span> HelloWorldCategory
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment"># spoke icon (will be displayed on the hub)</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment"># preferred are the -symbolic icons as these are used in Anaconda's spokes</span>
<span xmlns="" class="line">​</span>    icon <span xmlns="" class="perl_Char">=</span> <span xmlns="" class="perl_String">"face-cool-symbolic"</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment"># title of the spoke (will be displayed on the hub)</span>
<span xmlns="" class="line">​</span>    title <span xmlns="" class="perl_Char">=</span> N_<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_String">"_HELLO WORLD"</span><span xmlns="" class="perl_Char">)</span></pre></div></div><div class="para">
					The <code class="varname">__all__</code> attribute is used to export the spoke class, followed by the first lines of its definition including definitions of attributes mentioned above. The values of these attributes are referencing widgets defined in <a href="https://github.com/rhinstaller/hello-world-anaconda-addon/blob/master/org_fedora_hello_world/gui/spokes/hello_world.glade"><code class="filename">org_fedora_hello_world/gui/spokes/hello.glade</code></a> file.
				</div><div class="para">
					Two other notable attributes are present. The first is <code class="varname">category</code>, which has its value imported from the <code class="classname">HelloWorldCategory</code> class from the <a href="https://github.com/rhinstaller/hello-world-anaconda-addon/blob/master/org_fedora_hello_world/categories/hello_world.py"><code class="filename">org_fedora_hello_world.categories</code></a> module. The <code class="classname">HelloWorldCategory</code> class will be discussed later, but for now, note that the path to add-ons is in sys.path so that things can be imported from the <span class="package">org_fedora_hello_world</span> package.
				</div><div class="para">
					The second notable attribute in the example is <code class="varname">title</code>, which contains two underscores in its definition. The first one is part of the <code class="function">N_</code> function name which marks the string for translation, but returns the non-translated version of the string (translation is done later). The second underscore marks the beginning of the title itself and makes the spoke reachable using the <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>H</strong></span> keyboard shortcut.
				</div><div class="para">
					What usually follows the header of the class definition and the class attributes definitions is the constructor that initializes an instance of the class. In case of the <span class="application"><strong>Anaconda</strong></span> graphical interface objects there are two methods initializing a new instance: the <code class="methodname">__init__</code> method and the <code class="methodname">initialize</code> method.
				</div><div class="para">
					The reason for two such functions is that the GUI objects may be created in memory at one time and fully initialized (which can take a longer time) at a different time. Therefore, the <code class="methodname">__init__</code> method should only call the parent's <code class="methodname">__init__</code> method and (for example) initialize non-GUI attributes. On the other hand, the <code class="methodname">initialize</code> method that is called when the installer's graphical user interface initializes should finish the full initialization of the spoke.
				</div><div class="para">
					In the sample Hello World add-on, these two methods are defined as follows (note the number and description of the arguments passed to the <code class="methodname">__init__</code> method):
				</div><div class="example"><a id="exam-gui-init">
      ⁠</a><p class="title"><strong>Example 8. Defining the __init__ and initialize Methods</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">def</span> __init__<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_Others">self</span>, data, storage, payload, instclass<span xmlns="" class="perl_Char">):</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">"""</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        :see: pyanaconda.ui.common.Spoke.__init__</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        :param data: data object passed to every spoke to load/store data</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">                     from/to it</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        :type data: pykickstart.base.BaseHandler</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        :param storage: object storing storage-related information</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">                        (disks, partitioning, bootloader, etc.)</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        :type storage: blivet.Blivet</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        :param payload: object storing packaging-related information</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        :type payload: pyanaconda.packaging.Payload</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        :param instclass: distribution-specific information</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        :type instclass: pyanaconda.installclass.BaseInstallClass</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        """</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        NormalSpoke.__init__<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_Others">self</span>, data, storage, payload, instclass<span xmlns="" class="perl_Char">)</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">def</span> initialize<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_Others">self</span><span xmlns="" class="perl_Char">):</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">"""</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        The initialize method that is called after the instance is created.</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        The difference between __init__ and this method is that this may take</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        a long time and thus could be called in a separated thread.</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        :see: pyanaconda.ui.common.UIObject.initialize</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        """</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        NormalSpoke.initialize<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_Others">self</span><span xmlns="" class="perl_Char">)</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Others">self</span>._entry <span xmlns="" class="perl_Char">=</span> <span xmlns="" class="perl_Others">self</span>.builder.get_object<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_String">"textEntry"</span><span xmlns="" class="perl_Char">)</span></pre></div></div><div class="para">
					Note the <code class="varname">data</code> parameter passed to the <code class="methodname">__init__</code> method. This is the in-memory tree-like representation of the Kickstart file where all data is stored. In one of the ancestors' <code class="methodname">__init__</code> methods it is stored in the <code class="varname">self.data</code> attribute, which allows all other methods in the class to read and modify the structure.
				</div><div class="para">
					Because the <code class="classname">HelloWorldData</code> class has already been defined in <a class="xref" href="sect-writing-anaconda-addon.html#sect-anaconda-addon-kickstart-support">Section 6.1, “Kickstart Support”</a>, there already is a subtree in <code class="varname">self.data</code> for this add-on, and its root (an instance of the class) is available as <code class="varname">self.data.addons.org_fedora_hello_world</code>.
				</div><div class="para">
					One of the other things an ancestor's <code class="methodname">__init__</code> does is initializing an instance of the <code class="classname">GtkBuilder</code> with the spoke's <code class="filename">.glade</code> file and storing it as <code class="varname">self.builder</code>. This is used in the <code class="methodname">initialize</code> method to get the <code class="classname">GtkTextEntry</code> used to show and modify the text from the kickstart file's %addon section.
				</div><div class="para">
					The <code class="methodname">__init__</code> and <code class="methodname">initialize</code> methods are both important when the spoke is created. However, the main role of the spoke is to be visited by an user who wants to change or review the values this spoke shows and sets. To enable this, three other methods are available:
				</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							<code class="methodname">refresh</code> - called when the spoke is about to be visited; This method refreshes the state of the spoke (mainly its UI elements) to make sure that current values stored in the <code class="varname">self.data</code> structure are displayed
						</div></li><li class="listitem"><div class="para">
							<code class="methodname">apply</code> - called when the spoke is left and used to store values from UI elements back into the <code class="varname">self.data</code> structure
						</div></li><li class="listitem"><div class="para">
							<code class="methodname">execute</code> - called when the spoke is left and used to perform any runtime changes based on the new state of the spoke
						</div></li></ul></div><div class="para">
					These functions are implemented in the sample Hello World add-on in the following way:
				</div><div class="example"><a id="exam-gui-refresh-apply-execute">
      ⁠</a><p class="title"><strong>Example 9. Defining the refresh, apply and execute Methods</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">def</span> refresh<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_Others">self</span><span xmlns="" class="perl_Char">):</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">"""</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        The refresh method that is called every time the spoke is displayed.</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        It should update the UI elements according to the contents of</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        self.data.</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        :see: pyanaconda.ui.common.UIObject.refresh</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        """</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Others">self</span>._entry.set_text<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_Others">self</span>.data.addons.org_fedora_hello_world.text<span xmlns="" class="perl_Char">)</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">def</span> <span xmlns="" class="perl_DataType">apply</span><span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_Others">self</span><span xmlns="" class="perl_Char">):</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">"""</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        The apply method that is called when the spoke is left. It should</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        update the contents of self.data with values set in the GUI elements.</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        """</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Others">self</span>.data.addons.org_fedora_hello_world.text <span xmlns="" class="perl_Char">=</span> <span xmlns="" class="perl_Others">self</span>._entry.get_text<span xmlns="" class="perl_Char">()</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">def</span> execute<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_Others">self</span><span xmlns="" class="perl_Char">):</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">"""</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        The excecute method that is called when the spoke is left. It is</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        supposed to do all changes to the runtime environment according to</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        the values set in the GUI elements.</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        """</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment"># nothing to do here</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">pass</span>
</pre></div></div><div class="para">
					You can use several additional methods to control the spoke's state:
				</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
							<code class="methodname">ready</code> - determines whether the spoke is ready to be visited; if the value is false, the spoke is not accessible (e.g. the <span class="guilabel"><strong>Package Selection</strong></span> spoke before a package source is configured)
						</div></li><li class="listitem"><div class="para">
							<code class="methodname">completed</code> - determines if the spoke has been completed
						</div></li><li class="listitem"><div class="para">
							<code class="methodname">mandatory</code> - determines if the spoke is mandatory or not (e.g. the <span class="guilabel"><strong>Installation Destination</strong></span> spoke, which must be always visited, even if you want to use automatic partitioning)
						</div></li></ul></div><div class="para">
					All of these attributes need to be dynamically determined based on the current state of the installation process. Below is a sample implementation of these methods in the Hello World add-on, which requires some value to be set in the <code class="varname">text</code> attribute of the <code class="classname">HelloWorldData</code> class:
				</div><div class="example"><a id="exam-gui-ready-completed-mandatory">
      ⁠</a><p class="title"><strong>Example 10. Defining the ready, completed and mandatory Methods</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span>    @property
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">def</span> ready<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_Others">self</span><span xmlns="" class="perl_Char">):</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">"""</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        The ready property that tells whether the spoke is ready (can be visited)</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        or not. The spoke is made (in)sensitive based on the returned value.</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        :rtype: bool</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        """</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment"># this spoke is always ready</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_Others">True</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    @property
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">def</span> completed<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_Others">self</span><span xmlns="" class="perl_Char">):</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">"""</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        The completed property that tells whether all mandatory items on the</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        spoke are set, or not. The spoke will be marked on the hub as completed</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        or uncompleted acording to the returned value.</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        :rtype: bool</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        """</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">return</span> bool<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_Others">self</span>.data.addons.org_fedora_hello_world.text<span xmlns="" class="perl_Char">)</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    @property
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">def</span> mandatory<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_Others">self</span><span xmlns="" class="perl_Char">):</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">"""</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        The mandatory property that tells whether the spoke is mandatory to be</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        completed to continue in the installation process.</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        :rtype: bool</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        """</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment"># this is an optional spoke that is not mandatory to be completed</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_Others">False</span></pre></div></div><div class="para">
					After defining these properties, the spoke can control its accessibility and completeness, but it cannot provide a summary of the values configured within - you must visit the spoke to see how it is configured, which may not be desired. For this reason, an additional property called <code class="methodname">status</code> exists; this property contains a single line of text with a short summary of configured values, which can then be displayed in the hub under the spoke title.
				</div><div class="para">
					The <code class="methodname">status</code> property is defined in the Hello World example add-on as follows:
				</div><div class="example"><a id="sect-gui-status">
      ⁠</a><p class="title"><strong>Example 11. Defining the status Property</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span>    @property
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">def</span> status<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_Others">self</span><span xmlns="" class="perl_Char">):</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment">"""</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        The status property that is a brief string describing the state of the</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        spoke. It should describe whether all values are set and if possible</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        also the values themselves. The returned value will appear on the hub</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        below the spoke's title.</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        :rtype: str</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        """</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        text <span xmlns="" class="perl_Char">=</span> <span xmlns="" class="perl_Others">self</span>.data.addons.org_fedora_hello_world.text
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment"># If --reverse was specified in the kickstart, reverse the text</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">if</span> <span xmlns="" class="perl_Others">self</span>.data.addons.org_fedora_hello_world.reverse<span xmlns="" class="perl_Char">:</span>
<span xmlns="" class="line">​</span>            text <span xmlns="" class="perl_Char">=</span> text<span xmlns="" class="perl_Char">[::-</span><span xmlns="" class="perl_DecVal">1</span><span xmlns="" class="perl_Char">]</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">if</span> text<span xmlns="" class="perl_Char">:</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">return</span> _<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_String">"Text set: </span><span xmlns="" class="perl_Char">%s</span><span xmlns="" class="perl_String">"</span><span xmlns="" class="perl_Char">)</span> <span xmlns="" class="perl_Char">%</span> text
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">else</span><span xmlns="" class="perl_Char">:</span>
<span xmlns="" class="line">​</span>            <span xmlns="" class="perl_Keyword">return</span> _<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_String">"Text not set"</span><span xmlns="" class="perl_Char">)</span></pre></div></div><div class="para">
					After defining all properties described in this chapter, the add-on has full support for the graphical user interface as well as Kickstart. Note that the example demonstrated here is very simple and does not contain any controls; knowledge of Python Gtk programming is required to develop a functional, interactive spoke in the GUI.
				</div><div class="para">
					One notable restriction is that each spoke must have its own main window - an instance of the <code class="systemitem">SpokeWindow</code> widget. This widget, along with some other widgets specific to <span class="application"><strong>Anaconda</strong></span>, is found in the <span class="package">anaconda-widgets</span> package. Other files required for development of add-ons with GUI support (such as Glade definitions) can be found in the <span class="package">anaconda-widgets-devel</span> package.
				</div><div class="para">
					Once your graphical interface support module contains all necessary methods you can continue with the following section to add support for the text-based user interface, or you can continue with <a class="xref" href="sect-anaconda-addon-deploying-testing.html">Section 7, “Deploying and Testing an Anaconda Add-on”</a> and test the add-on.
				</div></div><div class="footnotes"><br /><hr /><div id="ftn.idm140412258820304" class="footnote"><div class="para"><a href="#idm140412258820304" class="para"><sup class="para">[4] </sup></a>
								an instance of the SpokeWindow widget which is a custom widget created for the Anaconda installer
							</div></div></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="sect-writing-anaconda-addon.html"><strong>Prev</strong>6. Writing an Anaconda add-on</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="sect-anaconda-addon-gui-support-advanced.html"><strong>Next</strong>6.2.2. Advanced features</a></li></ul></body></html>