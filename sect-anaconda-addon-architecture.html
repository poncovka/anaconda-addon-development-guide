<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">2. Architecture of Anaconda</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.2" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="Fedora-Anaconda_Addon_Development_Guide-24-en-US-2-1" /><link rel="home" href="index.html" title="Anaconda Addon Development Guide" /><link rel="up" href="index.html" title="Anaconda Addon Development Guide" /><link rel="prev" href="index.html" title="Anaconda Addon Development Guide" /><link rel="next" href="sect-anaconda-hub-and-spoke.html" title="3. The Hub &amp; Spoke model" /></head><body class="draft "><p id="title"><a class="left" href="http://www.fedoraproject.org"><img alt="Product Site" src="Common_Content/images//image_left.png" /></a><a class="right" href="http://docs.fedoraproject.org"><img alt="Documentation Site" src="Common_Content/images//image_right.png" /></a></p><ul class="docnav top"><li class="previous"><a accesskey="p" href="index.html"><strong>Prev</strong></a></li><li class="home">Anaconda Addon Development Guide</li><li class="next"><a accesskey="n" href="sect-anaconda-hub-and-spoke.html"><strong>Next</strong></a></li></ul><div class="section"><div class="titlepage"><div><div keep-together.within-column="always"><h2 class="title"><a id="sect-anaconda-addon-architecture">
      ⁠</a>2. Architecture of Anaconda</h2></div></div></div><div class="para">
			<span class="application"><strong>Anaconda</strong></span> is a set of Python modules and scripts. It also uses several external packages and libraries, some of which were created specifically for the installer. Major components of this toolset include the following packages:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					<code class="systemitem">pykickstart</code> - used to parse and validate Kickstart files and also to provide a data structure which stores values which drive the installation
				</div></li><li class="listitem"><div class="para">
					<code class="systemitem">yum</code> - the package manager which handles installation of packages and resolving dependencies
				</div></li><li class="listitem"><div class="para">
					<code class="systemitem">blivet</code> - originally split from the <span class="package">anaconda</span> package as <span class="package">pyanaconda.storage</span>; used to handle all activities related to storage management
				</div></li><li class="listitem"><div class="para">
					<code class="systemitem">pyanaconda</code> - package containing the core of the user interface and modules for functionality unique to <span class="application"><strong>Anaconda</strong></span>, such as keyboard and timezone selection, network configuration, and user creation, as well as a number of utilities and system-oriented functions
				</div></li><li class="listitem"><div class="para">
					<code class="systemitem">python-meh</code> - contains an exception handler which gathers and stores additional system information in case of a crash and passes this information to the <code class="systemitem">libreport</code> library, which itself is a part of the <a href="https://fedorahosted.org/abrt/">ABRT Project</a>.
				</div></li></ul></div><div class="para">
			The life cycle of data during the installation process is straightforward. If a Kickstart file is provided, it is processed by the <code class="systemitem">pykickstart</code> module and imported into memory as a tree-like structure. If no Kickstart file is provided, an empty tree-like structure is created instead. If the installation is interactive (not all required Kickstart commands have been used), the structure is then updated with choices made by the user in the interactive interface.
		</div><div class="para">
			Once all required choices are made, the installation process begins and values stored in the structure are used to determine parameters of the installation. The values are also written as a Kickstart file which is saved in the <code class="filename">/root/</code> directory on the installed system; therefore the installation can be replicated automatically by reusing this automatically generated Kickstart file.
		</div><div class="para">
			Elements of the tree-like structure are defined by the <span class="package">pykickstart</span> package, but some of them can be overriden by modified versions from the <code class="systemitem">pyanaconda.kickstart</code> module. An important rule which governs this behavior is that there is no place to store configuration data, and the installation process is data-driven and relies on transactions as much as possible. This enforces the following features:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					every feature of the installer <span class="emphasis"><em>must</em></span> be supported in Kickstart
				</div></li><li class="listitem"><div class="para">
					there is a single, obvious point in the installation process where changes are written to the target system; before this point, no lasting changes (e.g. formatting storage) are made
				</div></li><li class="listitem"><div class="para">
					every change made manually in the user interface is reflected in the resulting Kickstart file and can be replicated
				</div></li></ul></div><div class="para">
			The fact that the installation is <span class="emphasis"><em>data-driven</em></span> means that installation and configuration logic lies within the methods of the items in the tree-like structure. Every item is set up (the <code class="methodname">setup</code> method) to modify the runtime environment of the installation if necessary, and then executed (the <code class="methodname">execute</code> method) to perform the changes on the target system. These methods are further described in <a class="xref" href="sect-writing-anaconda-addon.html">Section 6, “Writing an Anaconda add-on”</a>.
		</div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="index.html"><strong>Prev</strong>Anaconda Addon Development Guide</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="sect-anaconda-hub-and-spoke.html"><strong>Next</strong>3. The Hub &amp; Spoke model</a></li></ul></body></html>