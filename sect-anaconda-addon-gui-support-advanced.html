<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">6.2.2. Advanced features</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.2" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="Fedora-Anaconda_Addon_Development_Guide-24-en-US-2-1" /><link rel="home" href="index.html" title="Anaconda Addon Development Guide" /><link rel="up" href="sect-anaconda-addon-gui-support.html" title="6.2. Graphical user interface" /><link rel="prev" href="sect-anaconda-addon-gui-support.html" title="6.2. Graphical user interface" /><link rel="next" href="sect-anaconda-addon-tui-support.html" title="6.3. Text User Interface" /></head><body class="draft "><p id="title"><a class="left" href="http://www.fedoraproject.org"><img alt="Product Site" src="Common_Content/images//image_left.png" /></a><a class="right" href="http://docs.fedoraproject.org"><img alt="Documentation Site" src="Common_Content/images//image_right.png" /></a></p><ul class="docnav top"><li class="previous"><a accesskey="p" href="sect-anaconda-addon-gui-support.html"><strong>Prev</strong></a></li><li class="home">Anaconda Addon Development Guide</li><li class="next"><a accesskey="n" href="sect-anaconda-addon-tui-support.html"><strong>Next</strong></a></li></ul><div class="section"><div class="titlepage"><div><div keep-together.within-column="always"><h4 class="title"><a id="sect-anaconda-addon-gui-support-advanced">
      ⁠</a>6.2.2. Advanced features</h4></div></div></div><div class="para">
					The <code class="filename">pyanaconda</code> package contains several helper and utility functions and constructs which may be used by hubs and spokes and which have not been covered in the previous section. Most of them are located in <a href="https://github.com/rhinstaller/anaconda/blob/master/pyanaconda/ui/gui/utils.py"><code class="filename">pyanaconda.ui.gui.utils</code></a>.
				</div><div class="para">
					The <a href="https://github.com/rhinstaller/hello-world-anaconda-addon">sample Hello World add-on</a> demonstrates usage of the <code class="function">englightbox</code> content manager which is also used in <span class="application"><strong>Anaconda</strong></span>. This manager can put a window into a lightbox to increase its visibility and focus it and to prevent users interacting with the underlying window. To demonstrate this function, the sample add-on contains a button which opens a new dialog window; the dialog itself is a special <code class="classname">HelloWorldDialog</code> inheriting from the <code class="classname">GUIObject</code> class, which is defined in <a href="https://github.com/rhinstaller/anaconda/blob/master/pyanaconda/ui/gui/__init__.py"><code class="filename">pyanaconda.ui.gui.__init__</code></a>.
				</div><div class="para">
					The <code class="classname">dialog</code> class defines the <code class="methodname">run</code> method which runs and destroys an internal Gtk dialog accessible through the <code class="varname">self.window</code> attribute, which is populated using a <code class="classname">mainWidgetName</code> class attribute with the same meaning. Therefore, the code defining the dialog is very simple, as demonstrated in the following example:
				</div><div class="example"><a id="exam-gui-advanced-dialog">
      ⁠</a><p class="title"><strong>Example 12. Defining a englightbox Dialog</strong></p><div class="example-contents"><pre class="programlisting"><span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment"># every GUIObject gets ksdata in __init__</span>
<span xmlns="" class="line">​</span>        dialog <span xmlns="" class="perl_Char">=</span> HelloWorldDialog<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_Others">self</span>.data<span xmlns="" class="perl_Char">)</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Comment"># show dialog above the lightbox</span>
<span xmlns="" class="line">​</span>        with enlightbox<span xmlns="" class="perl_Char">(</span><span xmlns="" class="perl_Others">self</span>.window, dialog.window<span xmlns="" class="perl_Char">):</span>
<span xmlns="" class="line">​</span>            dialog.run<span xmlns="" class="perl_Char">()</span></pre></div></div><div class="para">
					The code above creates an instance of the dialog and then uses the <code class="function">enlightbox</code> context manager to run the dialog within a lightbox. The context manager needs a reference to the window of the spoke and to the dialog's window to instantiate the lightbox for them.
				</div><div class="para">
					Another useful feature provided by <span class="application"><strong>Anaconda</strong></span> is the ability to define a spoke which will appear both during the installation and after the first reboot (in the <span class="application"><strong>Initial Setup</strong></span> utility described in <a class="xref" href="index.html#sect-firstboot-introduction">Section 1.2, “Firstboot and Initial Setup”</a>). To make a spoke available in both <span class="application"><strong>Anaconda</strong></span> and <span class="application"><strong>Initial Setup</strong></span>, you must inherit the special <code class="classname">FirstbootSpokeMixIn</code> (or, more precisely, mixin) as the first inherited class defined in the <a href="https://github.com/rhinstaller/anaconda/blob/master/pyanaconda/ui/common.py"><code class="filename">pyanaconda.ui.common</code></a> module.
				</div><div class="para">
					If you want to make a certain spoke available <span class="emphasis"><em>only</em></span> in <span class="application"><strong>Initial Setup</strong></span>, you should instead inherit the <code class="classname">FirstbootOnlySpokeMixIn</code> class.
				</div><div class="para">
					There are many more advanced features provided by the <span class="package">pyanaconda</span> package (like the <code class="function">@gtk_action_wait</code> and <code class="function">@gtk_action_nowait</code> decorators), but they are out of scope of this guide. Readers are recommended to go through the <a href="https://github.com/rhinstaller/anaconda">installer's sources</a> for examples.
				</div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="sect-anaconda-addon-gui-support.html"><strong>Prev</strong>6.2. Graphical user interface</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="sect-anaconda-addon-tui-support.html"><strong>Next</strong>6.3. Text User Interface</a></li></ul></body></html>